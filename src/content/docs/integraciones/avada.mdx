---
title: Integración con Avada
description: Guía completa para integrar Glory con el page builder Avada
sidebar:
  label: Avada Integration
---

import { Steps } from '@astrojs/starlight/components';

# Integración con Avada

La integración con Avada permite que Glory funcione perfectamente con el popular page builder Avada, proporcionando elementos personalizados, gestión de opciones integrada y soporte completo para el Avada Builder.

## Características principales

- **Elementos personalizados**: Shortcodes nativos de Avada para componentes Glory
- **Panel de opciones integrado**: Configuración unificada en el panel de Avada
- **Soporte automático**: Avada Builder habilitado para todos los CPT públicos
- **Gestión de fuentes**: Integración completa con el sistema de tipografía de Avada
- **Templates personalizados**: Plantillas de página específicas para Glory

## Activación de la integración

### Método automático (recomendado)

```php
<?php
// En functions.php del tema

use Glory\Core\GloryFeatures;

// Activar integración con Avada
GloryFeatures::enable('avadaIntegration');
?>
```

### Método manual

```php
<?php
// En functions.php del tema

use Glory\Integration\Avada\AvadaIntegration;

// Registrar integración manualmente
AvadaIntegration::register();
?>
```

### Verificación de activación

```php
use Glory\Integration\Compatibility;

// Verificar si Avada está activo
if (Compatibility::avadaActivo()) {
    // Avada está disponible
}
```

## Elementos personalizados incluidos

### Glory Content Render

Elemento de Avada para renderizar contenido usando componentes Glory:

```php
// Uso básico en template de Avada
[glory_content_render post_id="123" template="tarjeta_blog"]
```

**Parámetros disponibles:**
- `post_id`: ID del post a renderizar
- `template`: Plantilla a usar (del TemplateRegistry)
- `item_class`: Clase CSS adicional
- `show_thumbnail`: Mostrar/ocultar imagen destacada
- `show_excerpt`: Mostrar/ocultar extracto

### Glory Image

Elemento optimizado para imágenes con soporte CDN:

```php
[glory_image post_id="123" size="large" quality="80" strip="info"]
```

### Glory Gallery

Galería avanzada con lazy loading y optimización:

```php
[glory_gallery ids="1,2,3,4" columns="3" lightbox="true"]
```

## Panel de opciones integrado

### Sección Glory en Avada

La integración agrega automáticamente una sección "Glory" al panel de opciones de Avada:

```php
// Acceso: Avada > Options > Glory
```

### Puente de opciones

El `AvadaOptionsBridge` sincroniza automáticamente las opciones entre Glory y Avada:

```php
use Glory\Integration\Avada\AvadaOptionsBridge;

// Las opciones se sincronizan automáticamente
// No se requiere configuración adicional
```

## Soporte para Custom Post Types

### Habilitación automática

Avada Builder se habilita automáticamente para todos los CPT públicos:

```php
use Glory\Integration\Avada\AvadaBuilderCptSupport;

// Se registra automáticamente en AvadaIntegration::register()
```

### Configuración manual adicional

```php
<?php
function habilitar_avada_para_cpt_personalizado() {
    if (function_exists('fusion_builder_auto_activate_cpt')) {
        fusion_builder_auto_activate_cpt('mi_cpt');
    }
}
add_action('init', 'habilitar_avada_para_cpt_personalizado', 20);
?>
```

## Integración de fuentes

### Sistema de fuentes personalizado

```php
use Glory\Integration\Avada\AvadaFontsIntegration;

// Se registra automáticamente
// Agrega fuentes personalizadas al selector de Avada
```

### Descubrimiento automático de fuentes

```php
use Glory\Integration\Avada\AvadaFontsUtils;

// Obtener todas las familias de fuentes disponibles
$familias = AvadaFontsUtils::discoverFontFamilies();

// Obtener todas las fuentes disponibles
$fuentes = AvadaFontsUtils::discoverFonts();
```

### CSS de fuentes personalizado

```php
// Generar CSS @font-face
$css = AvadaFontsUtils::buildFontFaceCss([
    'MiFuente' => [
        'url' => 'https://example.com/fuente.woff2',
        'weight' => '400',
        'style' => 'normal'
    ]
]);
```

## Plantillas de página

### Registro automático de templates

```php
use Glory\Integration\Avada\AvadaTemplateRegistrar;

// Registra templates automáticamente
// Disponibles en Avada > Layout > Page Templates
```

### Templates disponibles

- **Glory Full Width**: Layout completo sin sidebar
- **Glory Contained**: Layout contenido con ancho máximo
- **Glory Canvas**: Layout completamente personalizado

## Optimizaciones incluidas

### Eliminación de secciones innecesarias

```php
// Remueve automáticamente la sección "Portfolio" del panel de Avada
add_filter('avada_options_sections', [AvadaIntegration::class, 'filterRemovePortfolioSection']);
```

### Redirección automática

```php
// Redirige automáticamente desde avada-setup al dashboard
// Evita páginas innecesarias cuando Glory está activo
```

### Gestión de menús

```php
// Oculta el menú de opciones de Glory cuando Avada está activo
// Previene duplicación de interfaces
```

## Ejemplos de uso avanzado

### Página completa con elementos Glory

```php
<?php
/**
 * Template Name: Glory Homepage
 */

// Contenido usando Avada Builder con elementos Glory
?>

<!-- Avada Container -->
<div class="fusion-fullwidth fullwidth-box fusion-builder-row-1 fusion-flex-container">

    <!-- Hero Section con Glory Image -->
    <div class="fusion-builder-column-1">
        [glory_image post_id="123" size="full" quality="90"]
    </div>

    <!-- Content Grid con Glory Content Render -->
    <div class="fusion-builder-column-2">
        [glory_content_render template="tarjeta_blog" item_class="homepage-post"]
        [glory_content_render template="tarjeta_blog" item_class="homepage-post"]
        [glory_content_render template="tarjeta_blog" item_class="homepage-post"]
    </div>

    <!-- Gallery Section -->
    <div class="fusion-builder-column-3">
        [glory_gallery ids="456,789,101" columns="4" lightbox="true"]
    </div>

</div>
```

### Custom Post Type con template personalizado

```php
<?php
/**
 * Template Name: Single Producto
 * Template Post Type: producto
 */

get_header();

// Layout personalizado para productos
?>
<div class="producto-layout">

    <div class="producto-imagen">
        [glory_image post_id="<?php the_ID(); ?>" size="large"]
    </div>

    <div class="producto-info">
        <h1><?php the_title(); ?></h1>

        <?php if ($precio = get_post_meta(get_the_ID(), 'precio', true)): ?>
            <div class="producto-precio">
                $<?php echo number_format($precio, 0, ',', '.'); ?>
            </div>
        <?php endif; ?>

        <div class="producto-descripcion">
            <?php the_content(); ?>
        </div>
    </div>

    <!-- Galería de producto -->
    <?php if ($galeria = get_post_meta(get_the_ID(), 'galeria', true)): ?>
        <div class="producto-galeria">
            [glory_gallery ids="<?php echo esc_attr($galeria); ?>" columns="3"]
        </div>
    <?php endif; ?>

</div>
<?php

get_footer();
?>
```

### Integración con opciones de Avada

```php
<?php
// En functions.php - Extender opciones de Avada

function agregar_opciones_glory_avada($sections) {
    $sections['glory_personalizado'] = [
        'label'    => esc_html__('Glory Personalizado', 'text-domain'),
        'id'       => 'glory_personalizado',
        'priority' => 25,
        'icon'     => 'fas fa-cogs',
        'fields'   => [
            'glory_color_primario' => [
                'label'       => esc_html__('Color Primario', 'text-domain'),
                'description' => esc_html__('Color principal del tema', 'text-domain'),
                'id'          => 'glory_color_primario',
                'type'        => 'color',
                'default'     => '#007cba',
            ],
            'glory_animaciones' => [
                'label'       => esc_html__('Habilitar Animaciones', 'text-domain'),
                'description' => esc_html__('Activar animaciones CSS', 'text-domain'),
                'id'          => 'glory_animaciones',
                'type'        => 'switch',
                'default'     => 1,
            ],
        ],
    ];

    return $sections;
}
add_filter('avada_options_sections', 'agregar_opciones_glory_avada');
?>
```

## Solución de problemas

### Elementos no aparecen en Avada Builder

1. **Verificar activación**: Confirmar que `GloryFeatures::enable('avadaIntegration')` esté llamado
2. **Limpiar caché**: Limpiar caché de Avada y WordPress
3. **Verificar dependencias**: Asegurar que todos los archivos de integración estén presentes

### Opciones no se sincronizan

1. **Verificar puente**: Confirmar que `AvadaOptionsBridge::register()` se ejecuta
2. **Limpiar transients**: Eliminar transients relacionados con opciones de Avada
3. **Verificar permisos**: Asegurar permisos de escritura en `wp_options`

### Fuentes personalizadas no aparecen

1. **Verificar integración**: Confirmar que `AvadaFontsIntegration::register()` se ejecuta
2. **Limpiar caché**: Limpiar caché de fuentes de Avada
3. **Verificar archivos**: Asegurar que los archivos de fuentes sean accesibles

## Mejores prácticas

### 1. Usar elementos en lugar de shortcodes directos

```php
// ✅ Recomendado: Usar elementos de Avada
[glory_content_render template="mi_template"]

// ❌ Evitar: Llamadas directas a PHP
<?php echo do_shortcode('[glory_content_render template="mi_template"]'); ?>
```

### 2. Configurar integración temprano

```php
<?php
// functions.php - Lo más temprano posible

use Glory\Core\GloryFeatures;

// Activar antes de que Avada se inicialice
GloryFeatures::enable('avadaIntegration');
?>
```

### 3. Usar templates específicos para CPT

```php
<?php
// Crear templates específicos para mejor organización

/**
 * Template Name: Single Evento
 * Template Post Type: evento
 */

// Template personalizado para eventos
?>
```

### 4. Optimizar carga de assets

```php
<?php
// Cargar assets condicionalmente

function cargar_assets_glory_avada() {
    if (function_exists('fusion_is_page_builder_used')) {
        // Solo cargar si se usa Avada Builder
        if (fusion_is_page_builder_used()) {
            wp_enqueue_script('glory-avada-extensions', '...', [], null, true);
        }
    }
}
add_action('wp_enqueue_scripts', 'cargar_assets_glory_avada');
?>
```

## Consideraciones de performance

- Los elementos se cargan solo cuando Avada Builder está activo
- El puente de opciones se optimiza para evitar consultas innecesarias
- Las fuentes personalizadas se cachean automáticamente
- Los templates se registran una sola vez por carga de página

## Compatibilidad

- **Avada**: Versiones 7.0+
- **WordPress**: 5.0+
- **PHP**: 7.4+
- **Glory**: Todas las versiones compatibles
