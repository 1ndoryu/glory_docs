---
title: Button
description: Componente de botones reutilizable con múltiples estilos y estados
---

import { Steps, FileTree } from '@astrojs/starlight/components';

## Button

El componente `Button` proporciona una forma sencilla y segura de generar botones HTML reutilizables con opciones de personalización flexibles.

### Características principales

- **Sanitización automática** de entrada para seguridad
- **Atributos HTML personalizables** (id, data-*, etc.)
- **Clases CSS flexibles** para estilos personalizados
- **Texto configurable** con soporte para HTML especial
- **API simple y directa** para uso rápido

### Método disponible

#### render(array $options = []): string

Genera el HTML de un botón basado en las opciones proporcionadas.

**Parámetros:**
- `texto` (string): Texto del botón. Por defecto: 'Botón'
- `class` (string): Clases CSS para el botón. Por defecto: vacío
- `attrs` (array): Array asociativo de atributos HTML adicionales

**Retorna:** HTML del botón como string

### Uso básico

```php
<?php
use Glory\Components\Button;

// Botón simple
echo Button::render();

// Botón con texto personalizado
echo Button::render(['texto' => 'Guardar cambios']);

// Botón con clases CSS
echo Button::render([
    'texto' => 'Enviar formulario',
    'class' => 'btn btn-primary btn-lg'
]);
?>
```

### Ejemplos avanzados

#### Botón con atributos personalizados

```php
<?php
// Botón con ID y atributos data
echo Button::render([
    'texto' => 'Eliminar elemento',
    'class' => 'btn btn-danger',
    'attrs' => [
        'id' => 'delete-btn',
        'data-item-id' => '123',
        'data-confirm' => '¿Estás seguro?',
        'aria-label' => 'Eliminar este elemento'
    ]
]);
?>
```

#### Botón para acciones JavaScript

```php
<?php
// Botón que dispara función JavaScript
echo Button::render([
    'texto' => 'Mostrar modal',
    'class' => 'btn btn-secondary',
    'attrs' => [
        'onclick' => 'openModal()',
        'type' => 'button'
    ]
]);
?>
```

#### Sistema de botones reutilizable

```php
<?php
class BotonesUI {
    public static function primario(string $texto, array $attrs = []): string {
        return Button::render([
            'texto' => $texto,
            'class' => 'btn btn-primary',
            'attrs' => $attrs
        ]);
    }

    public static function secundario(string $texto, array $attrs = []): string {
        return Button::render([
            'texto' => $texto,
            'class' => 'btn btn-secondary',
            'attrs' => $attrs
        ]);
    }

    public static function peligro(string $texto, array $attrs = []): string {
        return Button::render([
            'texto' => $texto,
            'class' => 'btn btn-danger',
            'attrs' => $attrs
        ]);
    }
}

// Uso
echo BotonesUI::primario('Guardar');
echo BotonesUI::secundario('Cancelar', ['onclick' => 'cancelar()']);
echo BotonesUI::peligro('Eliminar', [
    'data-confirm' => 'Esta acción no se puede deshacer'
]);
?>
```

### Estructura HTML generada

```html
<!-- Botón simple -->
<button class="" type="button">Botón</button>

<!-- Botón personalizado -->
<button class="btn btn-primary btn-lg" type="button">Enviar formulario</button>

<!-- Botón con atributos -->
<button class="btn btn-danger" type="button" id="delete-btn" data-item-id="123" data-confirm="¿Estás seguro?" aria-label="Eliminar este elemento">Eliminar elemento</button>
```

### Estilos CSS recomendados

```css
/* Sistema de botones básico */
.btn {
    display: inline-block;
    padding: 8px 16px;
    border: 1px solid transparent;
    border-radius: 4px;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
}

.btn:focus {
    outline: 2px solid #007cba;
    outline-offset: 2px;
}

.btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

/* Variantes de color */
.btn-primary {
    background-color: #007cba;
    color: white;
    border-color: #007cba;
}

.btn-primary:hover:not(:disabled) {
    background-color: #005a87;
    border-color: #005a87;
}

.btn-secondary {
    background-color: #6c757d;
    color: white;
    border-color: #6c757d;
}

.btn-secondary:hover:not(:disabled) {
    background-color: #545b62;
    border-color: #545b62;
}

.btn-danger {
    background-color: #dc3545;
    color: white;
    border-color: #dc3545;
}

.btn-danger:hover:not(:disabled) {
    background-color: #c82333;
    border-color: #c82333;
}

.btn-success {
    background-color: #28a745;
    color: white;
    border-color: #28a745;
}

.btn-success:hover:not(:disabled) {
    background-color: #218838;
    border-color: #218838;
}

/* Tamaños */
.btn-sm {
    padding: 6px 12px;
    font-size: 12px;
}

.btn-lg {
    padding: 12px 24px;
    font-size: 16px;
}

/* Estados */
.btn:active {
    transform: translateY(1px);
}

.btn.loading {
    position: relative;
    color: transparent;
}

.btn.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 16px;
    height: 16px;
    margin: -8px 0 0 -8px;
    border: 2px solid #ffffff;
    border-top: 2px solid transparent;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
```

### Integración con JavaScript

```javascript
// Estados dinámicos de botones
function setButtonLoading(buttonElement, loading = true) {
    if (loading) {
        buttonElement.classList.add('loading');
        buttonElement.disabled = true;
    } else {
        buttonElement.classList.remove('loading');
        buttonElement.disabled = false;
    }
}

// Ejemplo de uso con fetch
document.addEventListener('DOMContentLoaded', function() {
    const buttons = document.querySelectorAll('.btn[data-action]');

    buttons.forEach(button => {
        button.addEventListener('click', function() {
            const action = this.getAttribute('data-action');
            const itemId = this.getAttribute('data-item-id');

            setButtonLoading(this, true);

            // Usar gloryAjax para la petición
            gloryAjax({
                action: action,
                data: { id: itemId },
                success: function(response) {
                    setButtonLoading(button, false);
                    if (response.success) {
                        // Actualizar UI
                        console.log('Acción completada');
                    }
                },
                error: function() {
                    setButtonLoading(button, false);
                    alert('Error en la operación');
                }
            });
        });
    });
});
```

### Consideraciones de seguridad

- **Sanitización automática** con `htmlspecialchars()` para prevenir XSS
- **Validación de tipos** para arrays y strings
- **Atributos seguros** - solo permite atributos HTML válidos
- **No ejecuta JavaScript** directamente (usa eventos separados)

### Casos de uso comunes

#### Botones de acción en tablas

```php
<?php
// En un bucle de elementos
foreach ($items as $item) {
    echo '<tr>';
    echo '<td>' . esc_html($item->title) . '</td>';
    echo '<td>';
    echo Button::render([
        'texto' => 'Editar',
        'class' => 'btn btn-sm btn-secondary',
        'attrs' => [
            'data-action' => 'edit',
            'data-item-id' => $item->ID
        ]
    ]);
    echo Button::render([
        'texto' => 'Eliminar',
        'class' => 'btn btn-sm btn-danger',
        'attrs' => [
            'data-action' => 'delete',
            'data-item-id' => $item->ID,
            'data-confirm' => '¿Eliminar este elemento?'
        ]
    ]);
    echo '</td>';
    echo '</tr>';
}
?>
```

#### Formulario con botones múltiples

```php
<?php
// Formulario con acciones diferentes
?>
<form method="post" action="">
    <!-- Campos del formulario -->

    <div class="form-actions">
        <?php echo Button::render([
            'texto' => 'Guardar borrador',
            'class' => 'btn btn-secondary',
            'attrs' => [
                'type' => 'submit',
                'name' => 'action',
                'value' => 'draft'
            ]
        ]); ?>

        <?php echo Button::render([
            'texto' => 'Publicar',
            'class' => 'btn btn-primary',
            'attrs' => [
                'type' => 'submit',
                'name' => 'action',
                'value' => 'publish'
            ]
        ]); ?>
    </div>
</form>
```

#### Botones de paginación

```php
<?php
function renderPaginationButtons(int $currentPage, int $totalPages): string {
    $html = '<div class="pagination-buttons">';

    if ($currentPage > 1) {
        $html .= Button::render([
            'texto' => 'Anterior',
            'class' => 'btn btn-outline',
            'attrs' => [
                'data-page' => $currentPage - 1
            ]
        ]);
    }

    for ($i = max(1, $currentPage - 2); $i <= min($totalPages, $currentPage + 2); $i++) {
        $html .= Button::render([
            'texto' => $i,
            'class' => 'btn ' . ($i === $currentPage ? 'btn-primary' : 'btn-outline'),
            'attrs' => [
                'data-page' => $i
            ]
        ]);
    }

    if ($currentPage < $totalPages) {
        $html .= Button::render([
            'texto' => 'Siguiente',
            'class' => 'btn btn-outline',
            'attrs' => [
                'data-page' => $currentPage + 1
            ]
        ]);
    }

    $html .= '</div>';
    return $html;
}

echo renderPaginationButtons(3, 10);
?>
```

### Solución de problemas

#### El botón no responde a clics
```php
// Asegurar que el botón tenga el tipo correcto
echo Button::render([
    'texto' => 'Acción',
    'class' => 'btn',
    'attrs' => [
        'type' => 'button', // Importante para botones que no submiten forms
        'onclick' => 'miFuncion()'
    ]
]);
```

#### Atributos no aparecen
```php
// Verificar que attrs sea un array asociativo
$attrs = [
    'id' => 'mi-boton',
    'data-value' => '123'
];

echo Button::render([
    'texto' => 'Botón',
    'attrs' => $attrs
]);
```

#### Problemas de encoding
```php
// El componente maneja automáticamente la sanitización
$texto = 'Guardar & continuar';
echo Button::render(['texto' => $texto]); // Se escapa automáticamente
```

### Mejores prácticas

1. **Usa clases semánticas** en lugar de estilos inline
2. **Proporciona texto accesible** con `aria-label` cuando sea necesario
3. **Considera el contexto** - botones en forms deberían tener `type="submit"`
4. **Mantén consistencia** en el sistema de clases CSS
5. **Prueba accesibilidad** con navegación por teclado
6. **Usa estados loading** para operaciones asíncronas

### Comparación con alternativas

```php
<?php
// ❌ No recomendado - HTML hardcoded
echo '<button class="btn btn-primary" onclick="submitForm()">Enviar</button>';

// ✅ Recomendado - Usando el componente
echo Button::render([
    'texto' => 'Enviar',
    'class' => 'btn btn-primary',
    'attrs' => ['onclick' => 'submitForm()']
]);
?>
```

El componente `Button` asegura consistencia, seguridad y mantenibilidad en toda la aplicación.
