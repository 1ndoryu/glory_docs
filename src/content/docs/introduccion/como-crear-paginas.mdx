---
title: C√≥mo Crear P√°ginas
description: Gu√≠a completa para crear p√°ginas personalizadas usando el sistema PageManager de Glory
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

# üìÑ C√≥mo Crear P√°ginas con Glory

Glory simplifica la creaci√≥n de p√°ginas mediante el `PageManager`. Las p√°ginas se definen con un slug y una funci√≥n handler que genera el contenido HTML.

## üèóÔ∏è C√≥mo Funciona

1. **Define** p√°ginas en `App/Config/config.php` con `PageManager::define()`
2. **Crea** funciones handler que generan solo el contenido (sin HTML completo)
3. **TemplateGlory.php** se encarga del `<head>`, navegaci√≥n y footer autom√°ticamente

### Ventajas

- ‚úÖ Sin repetir HTML boilerplate en cada p√°gina
- ‚úÖ Header/footer consistentes autom√°ticamente
- ‚úÖ Enfoque en el contenido espec√≠fico de cada p√°gina

## üöÄ Crear tu Primera P√°gina

### Paso 1: Definir la P√°gina

Edita `App/Config/config.php`:

```php
<?php
use Glory\Manager\PageManager;

// P√°gina de contacto
PageManager::define('contacto', 'renderContacto');

// P√°gina "Sobre Nosotros"
PageManager::define('sobre-nosotros', 'renderSobreNosotros');

// P√°gina con par√°metros din√°micos
PageManager::define('producto', 'renderProducto');
```

### Paso 2: Crear la Funci√≥n Handler

Crea la funci√≥n en cualquier archivo PHP cargado por tu tema (recomendado: `functions.php` o archivos dedicados):

```php
<?php
/**
 * Handler para la p√°gina de contacto
 */
function renderContacto() {
    // Obtener datos de opciones si es necesario
    $email = get_option('admin_email');
    $telefono = OpcionManager::get('telefono_contacto');
    ?>

    <div class="contacto-hero">
        <h1>Cont√°ctanos</h1>
        <p>Estamos aqu√≠ para ayudarte</p>
    </div>

    <div class="contacto-content">
        <div class="contacto-info">
            <div class="info-item">
                <h3>Email</h3>
                <p><?php echo esc_html($email); ?></p>
            </div>
            <?php if ($telefono): ?>
            <div class="info-item">
                <h3>Tel√©fono</h3>
                <p><?php echo esc_html($telefono); ?></p>
            </div>
            <?php endif; ?>
        </div>

        <div class="contacto-form">
            <h2>Env√≠anos un mensaje</h2>
            <?php
            use Glory\Components\FormBuilder;

            echo FormBuilder::inicio([
                'atributos' => ['id' => 'form-contacto']
            ]);

            echo FormBuilder::campoTexto([
                'nombre' => 'nombre',
                'label' => 'Nombre completo',
                'requerido' => true
            ]);

            echo FormBuilder::campoEmail([
                'nombre' => 'email',
                'label' => 'Correo electr√≥nico',
                'requerido' => true
            ]);

            echo FormBuilder::campoTextarea([
                'nombre' => 'mensaje',
                'label' => 'Mensaje',
                'requerido' => true,
                'placeholder' => 'Escribe tu mensaje aqu√≠...'
            ]);

            echo FormBuilder::botonEnviar([
                'accion' => 'procesarContacto',
                'texto' => 'Enviar Mensaje'
            ]);

            echo FormBuilder::fin();
            ?>
        </div>
    </div>
    <?php
}
```

## üìã P√°ginas con Par√°metros Din√°micos

### P√°gina de Producto Detallado

Para p√°ginas que necesitan par√°metros din√°micos, WordPress ofrece varias opciones. La m√°s recomendada es usar **Custom Post Types** con rewrite rules para URLs amigables.

#### Opci√≥n 1: Custom Post Types (Recomendado)

Esta es la forma m√°s WordPress-native y SEO-friendly.

```php
// En functions.php o archivo de configuraci√≥n
function registrar_post_type_producto() {
    register_post_type('producto', [
        'labels' => [
            'name' => 'Productos',
            'singular_name' => 'Producto',
        ],
        'public' => true,
        'has_archive' => true,
        'rewrite' => [
            'slug' => 'producto',
            'with_front' => false
        ],
        'supports' => ['title', 'editor', 'thumbnail', 'custom-fields'],
        'show_in_rest' => true, // Para Gutenberg
    ]);

    // Registrar taxonom√≠a para categor√≠as de producto
    register_taxonomy('categoria_producto', 'producto', [
        'labels' => [
            'name' => 'Categor√≠as de Producto',
            'singular_name' => 'Categor√≠a de Producto',
        ],
        'hierarchical' => true,
        'rewrite' => [
            'slug' => 'categoria-producto',
            'with_front' => false
        ],
    ]);
}
add_action('init', 'registrar_post_type_producto');
```

#### Crear Template para Single Producto

Crea `single-producto.php` en la ra√≠z del tema:

```php
<?php
/**
 * Template Name: Single Producto
 */

get_header();

// Obtener el producto actual
$producto = get_queried_object();

if ($producto && $producto->post_type === 'producto') {
    ?>

    <div class="producto-detalle">
        <div class="producto-hero">
            <h1><?php echo esc_html($producto->post_title); ?></h1>
        </div>

        <div class="producto-imagen">
            <?php echo get_the_post_thumbnail($producto->ID, 'large'); ?>
        </div>

        <div class="producto-contenido">
            <?php echo apply_filters('the_content', $producto->post_content); ?>
        </div>

        <div class="producto-meta">
            <p><strong>Precio:</strong> <?php echo get_post_meta($producto->ID, 'precio', true); ?>‚Ç¨</p>
            <p><strong>Categor√≠a:</strong> <?php the_terms($producto->ID, 'categoria_producto'); ?></p>
        </div>

        <div class="producto-acciones">
            <a href="<?php echo get_post_type_archive_link('producto'); ?>" class="btn-volver">
                ‚Üê Volver al cat√°logo
            </a>
        </div>
    </div>

    <?php
} else {
    // Producto no encontrado
    ?>
    <div class="error-404">
        <h1>Producto no encontrado</h1>
        <p>El producto que buscas no existe.</p>
        <a href="<?php echo get_post_type_archive_link('producto'); ?>" class="btn-catalogo">
            Ver todos los productos
        </a>
    </div>
    <?php
}

get_footer();
```

#### Crear P√°gina de Cat√°logo

Usa PageManager para la p√°gina de cat√°logo general:

```php
// En App/Config/pages.php
PageManager::define('productos', 'renderCatalogoProductos');
```

```php
<?php
function renderCatalogoProductos() {
    $paged = get_query_var('paged') ?: 1;

    $args = [
        'post_type' => 'producto',
        'posts_per_page' => 12,
        'paged' => $paged,
    ];

    // Filtros opcionales
    if (isset($_GET['categoria'])) {
        $args['tax_query'] = [[
            'taxonomy' => 'categoria_producto',
            'field' => 'slug',
            'terms' => sanitize_text_field($_GET['categoria']),
        ]];
    }

    $productos = new WP_Query($args);
    ?>

    <div class="catalogo-productos">
        <div class="catalogo-header">
            <h1>Nuestro Cat√°logo</h1>
            <p>Descubre nuestros productos</p>
        </div>

        <?php if ($productos->have_posts()): ?>
            <div class="productos-grid">
                <?php while ($productos->have_posts()): $productos->the_post(); ?>
                    <article class="producto-card">
                        <div class="producto-imagen">
                            <a href="<?php the_permalink(); ?>">
                                <?php the_post_thumbnail('medium'); ?>
                            </a>
                        </div>
                        <div class="producto-info">
                            <h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
                            <p class="precio"><?php echo get_post_meta(get_the_ID(), 'precio', true); ?>‚Ç¨</p>
                            <a href="<?php the_permalink(); ?>" class="btn-ver-mas">Ver detalles</a>
                        </div>
                    </article>
                <?php endwhile; ?>
            </div>

            <?php
            // Paginaci√≥n
            echo paginate_links([
                'total' => $productos->max_num_pages,
                'current' => $paged,
                'base' => PageManager::getUrl('productos') . '%_%',
                'format' => '?paged=%#%',
            ]);
            ?>

        <?php else: ?>
            <p>No se encontraron productos.</p>
        <?php endif; ?>

        <?php wp_reset_postdata(); ?>
    </div>
    <?php
}
```

#### Opci√≥n 2: URL Rewriting Personalizado

Si prefieres mantener el patr√≥n PageManager, puedes usar URL rewriting:

```php
// En functions.php
function agregar_rewrites_productos() {
    add_rewrite_rule(
        '^producto/([^/]+)/?$',
        'index.php?pagename=productos&producto_slug=$matches[1]',
        'top'
    );
}
add_action('init', 'agregar_rewrites_productos');

function agregar_query_vars_productos($vars) {
    $vars[] = 'producto_slug';
    return $vars;
}
add_filter('query_vars', 'agregar_query_vars_productos');
```

```php
// En App/Config/pages.php
PageManager::define('productos', 'renderProductos');
```

```php
<?php
function renderProductos() {
    $producto_slug = get_query_var('producto_slug');

    if ($producto_slug) {
        // Mostrar producto individual
        $producto = get_page_by_path($producto_slug, OBJECT, 'producto');
        if ($producto) {
            // Renderizar producto individual (similar al template anterior)
            renderProductoIndividual($producto);
        } else {
            render404();
        }
    } else {
        // Mostrar cat√°logo (similar al c√≥digo anterior)
        renderCatalogoProductos();
    }
}
```

## üß© Crear P√°ginas con Componentes Reutilizables

### P√°gina de Blog con ContentRender

```php
<?php
function renderBlog() {
    // Obtener par√°metros de paginaci√≥n
    $paged = get_query_var('paged') ?: 1;

    // Configuraci√≥n de la consulta
    $args = [
        'post_type' => 'post',
        'posts_per_page' => 10,
        'paged' => $paged
    ];

    // Aplicar filtros si existen
    if (isset($_GET['categoria'])) {
        $args['category_name'] = sanitize_text_field($_GET['categoria']);
    }
    ?>

    <div class="blog-header">
        <h1>Nuestro Blog</h1>
        <p>Descubre nuestros √∫ltimos art√≠culos</p>
    </div>

    <div class="blog-content">
        <div class="filtros-blog">
            <form method="GET" action="<?php echo PageManager::getUrl('blog'); ?>">
                <select name="categoria">
                    <option value="">Todas las categor√≠as</option>
                    <?php
                    $categorias = get_categories();
                    foreach ($categorias as $cat) {
                        $selected = (isset($_GET['categoria']) && $_GET['categoria'] === $cat->slug) ? 'selected' : '';
                        echo "<option value='{$cat->slug}' {$selected}>{$cat->name}</option>";
                    }
                    ?>
                </select>
                <button type="submit">Filtrar</button>
            </form>
        </div>

        <div class="posts-container">
            <?php
            use Glory\Components\ContentRender;

            ContentRender::print('post', [
                'queryArgs' => $args,
                'publicacionesPorPagina' => 10,
                'paginacion' => true,
                'plantillaCallback' => 'plantillaPostBlog'
            ]);
            ?>
        </div>
    </div>
    <?php
}

// Funci√≥n de plantilla personalizada
function plantillaPostBlog($post) {
    ?>
    <article class="post-card">
        <div class="post-imagen">
            <?php echo get_the_post_thumbnail($post->ID, 'medium'); ?>
        </div>
        <div class="post-contenido">
            <h2><?php echo esc_html($post->post_title); ?></h2>
            <div class="post-meta">
                <span class="fecha"><?php echo get_the_date('', $post); ?></span>
                <span class="autor">Por <?php echo get_the_author_meta('display_name', $post->post_author); ?></span>
            </div>
            <div class="post-excerpt">
                <?php echo wp_trim_words(get_the_excerpt($post), 30); ?>
            </div>
            <a href="<?php echo get_permalink($post); ?>" class="leer-mas">Leer m√°s</a>
        </div>
    </article>
    <?php
}
```

## üîß P√°ginas Avanzadas

### P√°gina con AJAX y Realtime

```php
<?php
function renderDashboard() {
    // Activar realtime para esta p√°gina
    use Glory\Core\GloryFeatures;
    GloryFeatures::enable('gloryRealtime');
    ?>

    <div class="dashboard-header">
        <h1>Dashboard</h1>
        <p>Panel de control en tiempo real</p>
    </div>

    <div id="notificaciones-container"></div>

    <div class="stats-grid">
        <div class="stat-card" data-channel="nuevo_pedido">
            <h3>Pedidos Hoy</h3>
            <span class="numero" id="pedidos-hoy">0</span>
        </div>
        <div class="stat-card" data-channel="nuevo_usuario">
            <h3>Usuarios Nuevos</h3>
            <span class="numero" id="usuarios-nuevos">0</span>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Cargar datos iniciales
        actualizarEstadisticas();

        // Configurar realtime
        if (window.gloryRealtimePoll) {
            window.gloryRealtimePoll(['nuevo_pedido', 'nuevo_usuario'], {
                intervalMs: 5000
            });

            document.addEventListener('gloryRealtime:update', function(e) {
                actualizarEstadisticas();
            });
        }
    });

    function actualizarEstadisticas() {
        gloryAjax('obtener_estadisticas_dashboard')
            .then(function(response) {
                if (response.success) {
                    document.getElementById('pedidos-hoy').textContent = response.data.pedidos_hoy;
                    document.getElementById('usuarios-nuevos').textContent = response.data.usuarios_nuevos;
                }
            });
    }
    </script>
    <?php
}
```


## üéØ Mejores Pr√°cticas

### Organizaci√≥n del C√≥digo

- **Funciones claras**: Una funci√≥n por p√°gina con nombres descriptivos
- **Reutilizaci√≥n**: Crea helpers para l√≥gica com√∫n
- **Separaci√≥n**: L√≥gica de negocio separada de la presentaci√≥n

### Estructura Recomendada

```
App/
‚îú‚îÄ‚îÄ Config/
‚îÇ   ‚îî‚îÄ‚îÄ pages.php         # Definiciones de p√°ginas
‚îî‚îÄ‚îÄ Handlers/
    ‚îú‚îÄ‚îÄ HomeHandler.php   # L√≥gica de p√°gina home
    ‚îú‚îÄ‚îÄ BlogHandler.php   # L√≥gica de p√°gina blog
    ‚îî‚îÄ‚îÄ ContactHandler.php # L√≥gica de p√°gina contacto
```

¬°Listo! Ahora puedes crear p√°ginas con Glory Framework. El sistema PageManager se encarga del enrutamiento, t√∫ solo necesitas definir las funciones que generan el contenido.

## üîç Depuraci√≥n

Para verificar que tus p√°ginas funcionan, puedes usar la funci√≥n de debug del administrador de WordPress o revisar los logs de Glory.
