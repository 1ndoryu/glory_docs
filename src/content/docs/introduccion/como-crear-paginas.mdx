---
title: C√≥mo Crear P√°ginas
description: Gu√≠a completa para crear p√°ginas personalizadas usando el sistema PageManager de Glory
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

# üìÑ C√≥mo Crear P√°ginas con Glory

Glory utiliza un sistema elegante para crear p√°ginas basado en el `PageManager`. Este sistema separa la definici√≥n de p√°ginas de su renderizado, permitiendo un c√≥digo m√°s organizado y mantenible.

## üèóÔ∏è Arquitectura del Sistema de P√°ginas

### C√≥mo Funciona

1. **PageManager** registra p√°ginas con un `slug` y una funci√≥n `handler`
2. **TemplateGlory.php** act√∫a como enrutador, ejecutando el `handler` correspondiente
3. Las funciones `handler` generan el HTML completo de la p√°gina

### Ventajas

- ‚úÖ Separaci√≥n clara entre configuraci√≥n y presentaci√≥n
- ‚úÖ Reutilizaci√≥n de c√≥digo
- ‚úÖ F√°cil mantenimiento
- ‚úÖ Sistema de plantillas consistente

## üöÄ Crear tu Primera P√°gina

### Paso 1: Definir la P√°gina

Edita `App/Config/config.php`:

```php
<?php
use Glory\Manager\PageManager;

// P√°gina de contacto
PageManager::define('contacto', 'renderContacto');

// P√°gina "Sobre Nosotros"
PageManager::define('sobre-nosotros', 'renderSobreNosotros');

// P√°gina con par√°metros din√°micos
PageManager::define('producto', 'renderProducto');
```

### Paso 2: Crear la Funci√≥n Handler

Crea `templates/Pages/Contacto.php`:

```php
<?php
/**
 * Handler para la p√°gina de contacto
 */
function renderContacto() {
    // Obtener datos de opciones si es necesario
    $email = get_option('admin_email');
    $telefono = OpcionManager::get('telefono_contacto');
    ?>
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Contacto - <?php bloginfo('name'); ?></title>
        <?php wp_head(); ?>
    </head>
    <body class="page-contacto">
        <header class="site-header">
            <nav class="main-nav">
                <a href="<?php echo home_url(); ?>">Inicio</a>
                <a href="<?php echo PageManager::getUrl('sobre-nosotros'); ?>">Sobre Nosotros</a>
                <a href="<?php echo PageManager::getUrl('contacto'); ?>" class="active">Contacto</a>
            </nav>
        </header>

        <main class="main-content">
            <div class="container">
                <h1>Cont√°ctanos</h1>

                <div class="contacto-info">
                    <div class="info-item">
                        <h3>Email</h3>
                        <p><?php echo esc_html($email); ?></p>
                    </div>
                    <?php if ($telefono): ?>
                    <div class="info-item">
                        <h3>Tel√©fono</h3>
                        <p><?php echo esc_html($telefono); ?></p>
                    </div>
                    <?php endif; ?>
                </div>

                <div class="contacto-form">
                    <h2>Env√≠anos un mensaje</h2>
                    <?php
                    use Glory\Components\FormBuilder;

                    echo FormBuilder::inicio([
                        'atributos' => ['id' => 'form-contacto']
                    ]);

                    echo FormBuilder::campoTexto([
                        'nombre' => 'nombre',
                        'label' => 'Nombre completo',
                        'requerido' => true
                    ]);

                    echo FormBuilder::campoEmail([
                        'nombre' => 'email',
                        'label' => 'Correo electr√≥nico',
                        'requerido' => true
                    ]);

                    echo FormBuilder::campoTextarea([
                        'nombre' => 'mensaje',
                        'label' => 'Mensaje',
                        'requerido' => true,
                        'placeholder' => 'Escribe tu mensaje aqu√≠...'
                    ]);

                    echo FormBuilder::botonEnviar([
                        'accion' => 'procesarContacto',
                        'texto' => 'Enviar Mensaje'
                    ]);

                    echo FormBuilder::fin();
                    ?>
                </div>
            </div>
        </main>

        <footer class="site-footer">
            <p>&copy; <?php echo date('Y'); ?> <?php bloginfo('name'); ?></p>
        </footer>

        <?php wp_footer(); ?>
    </body>
    </html>
    <?php
}
```

## üìã P√°ginas con Par√°metros Din√°micos

### P√°gina de Producto Detallado

Para p√°ginas que necesitan par√°metros (como ver un producto espec√≠fico), puedes usar el sistema de query vars de WordPress.

#### Definir la P√°gina

```php
// En config.php
PageManager::define('producto', 'renderProducto');
```

#### Crear el Handler

Crea `templates/Pages/Producto.php`:

```php
<?php
function renderProducto() {
    // Obtener el ID del producto desde la URL
    $producto_id = get_query_var('producto_id');

    if (!$producto_id) {
        // Mostrar p√°gina 404 o redirigir
        wp_redirect(home_url());
        exit;
    }

    // Obtener datos del producto (esto depende de tu implementaci√≥n)
    $producto = get_post($producto_id);

    if (!$producto || $producto->post_type !== 'producto') {
        // Producto no encontrado
        render404();
        return;
    }
    ?>
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <title><?php echo esc_html($producto->post_title); ?> - <?php bloginfo('name'); ?></title>
        <?php wp_head(); ?>
    </head>
    <body class="page-producto">
        <div class="producto-detalle">
            <h1><?php echo esc_html($producto->post_title); ?></h1>

            <div class="producto-imagen">
                <?php echo get_the_post_thumbnail($producto_id, 'large'); ?>
            </div>

            <div class="producto-contenido">
                <?php echo apply_filters('the_content', $producto->post_content); ?>
            </div>

            <div class="producto-meta">
                <p><strong>Precio:</strong> <?php echo get_post_meta($producto_id, 'precio', true); ?>‚Ç¨</p>
                <p><strong>Categor√≠a:</strong> <?php the_terms($producto_id, 'categoria_producto'); ?></p>
            </div>
        </div>

        <?php wp_footer(); ?>
    </body>
    </html>
    <?php
}
```

#### Registrar Query Var

En `functions.php` o en un archivo de configuraci√≥n:

```php
function agregar_query_vars($vars) {
    $vars[] = 'producto_id';
    return $vars;
}
add_filter('query_vars', 'agregar_query_vars');
```

## üß© Crear P√°ginas con Componentes Reutilizables

### P√°gina de Blog con ContentRender

Crea `templates/Pages/Blog.php`:

```php
<?php
function renderBlog() {
    // Obtener par√°metros de paginaci√≥n
    $paged = get_query_var('paged') ?: 1;

    // Configuraci√≥n de la consulta
    $args = [
        'post_type' => 'post',
        'posts_per_page' => 10,
        'paged' => $paged
    ];

    // Aplicar filtros si existen
    if (isset($_GET['categoria'])) {
        $args['category_name'] = sanitize_text_field($_GET['categoria']);
    }
    ?>
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <title>Blog - <?php bloginfo('name'); ?></title>
        <?php wp_head(); ?>
    </head>
    <body class="page-blog">
        <header>
            <h1>Nuestro Blog</h1>
        </header>

        <main>
            <div class="filtros-blog">
                <form method="GET" action="<?php echo PageManager::getUrl('blog'); ?>">
                    <select name="categoria">
                        <option value="">Todas las categor√≠as</option>
                        <?php
                        $categorias = get_categories();
                        foreach ($categorias as $cat) {
                            $selected = (isset($_GET['categoria']) && $_GET['categoria'] === $cat->slug) ? 'selected' : '';
                            echo "<option value='{$cat->slug}' {$selected}>{$cat->name}</option>";
                        }
                        ?>
                    </select>
                    <button type="submit">Filtrar</button>
                </form>
            </div>

            <div class="posts-container">
                <?php
                use Glory\Components\ContentRender;

                ContentRender::print('post', [
                    'queryArgs' => $args,
                    'publicacionesPorPagina' => 10,
                    'paginacion' => true,
                    'plantillaCallback' => 'plantillaPostBlog'
                ]);
                ?>
            </div>
        </main>

        <?php wp_footer(); ?>
    </body>
    </html>
    <?php
}

// Funci√≥n de plantilla personalizada
function plantillaPostBlog($post) {
    ?>
    <article class="post-card">
        <div class="post-imagen">
            <?php echo get_the_post_thumbnail($post->ID, 'medium'); ?>
        </div>
        <div class="post-contenido">
            <h2><?php echo esc_html($post->post_title); ?></h2>
            <div class="post-meta">
                <span class="fecha"><?php echo get_the_date('', $post); ?></span>
                <span class="autor">Por <?php echo get_the_author_meta('display_name', $post->post_author); ?></span>
            </div>
            <div class="post-excerpt">
                <?php echo wp_trim_words(get_the_excerpt($post), 30); ?>
            </div>
            <a href="<?php echo get_permalink($post); ?>" class="leer-mas">Leer m√°s</a>
        </div>
    </article>
    <?php
}
```

## üîß P√°ginas Avanzadas

### P√°gina con AJAX y Realtime

Crea una p√°gina de dashboard con actualizaciones en tiempo real:

```php
<?php
function renderDashboard() {
    // Activar realtime para esta p√°gina
    use Glory\Core\GloryFeatures;
    GloryFeatures::enable('gloryRealtime');
    ?>
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <title>Dashboard - <?php bloginfo('name'); ?></title>
        <?php wp_head(); ?>
    </head>
    <body class="page-dashboard">
        <div id="notificaciones-container"></div>

        <div class="stats-grid">
            <div class="stat-card" data-channel="nuevo_pedido">
                <h3>Pedidos Hoy</h3>
                <span class="numero" id="pedidos-hoy">0</span>
            </div>
            <div class="stat-card" data-channel="nuevo_usuario">
                <h3>Usuarios Nuevos</h3>
                <span class="numero" id="usuarios-nuevos">0</span>
            </div>
        </div>

        <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Cargar datos iniciales
            actualizarEstadisticas();

            // Configurar realtime
            if (window.gloryRealtimePoll) {
                window.gloryRealtimePoll(['nuevo_pedido', 'nuevo_usuario'], {
                    intervalMs: 5000
                });

                document.addEventListener('gloryRealtime:update', function(e) {
                    actualizarEstadisticas();
                });
            }
        });

        function actualizarEstadisticas() {
            gloryAjax('obtener_estadisticas_dashboard')
                .then(function(response) {
                    if (response.success) {
                        document.getElementById('pedidos-hoy').textContent = response.data.pedidos_hoy;
                        document.getElementById('usuarios-nuevos').textContent = response.data.usuarios_nuevos;
                    }
                });
        }
        </script>

        <?php wp_footer(); ?>
    </body>
    </html>
    <?php
}
```

## üì± P√°ginas Responsivas

### Estructura HTML Moderna

```php
<?php
function renderPaginaResponsiva() {
    ?>
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>T√≠tulo de P√°gina</title>
        <?php wp_head(); ?>
    </head>
    <body>
        <!-- Header responsivo -->
        <header class="site-header">
            <div class="container">
                <div class="logo">
                    <a href="<?php echo home_url(); ?>">
                        <?php bloginfo('name'); ?>
                    </a>
                </div>

                <!-- Men√∫ hamburguesa para m√≥vil -->
                <button class="menu-toggle" aria-label="Men√∫">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>

                <nav class="main-nav">
                    <a href="<?php echo PageManager::getUrl('home'); ?>">Inicio</a>
                    <a href="<?php echo PageManager::getUrl('productos'); ?>">Productos</a>
                    <a href="<?php echo PageManager::getUrl('contacto'); ?>">Contacto</a>
                </nav>
            </div>
        </header>

        <!-- Contenido principal -->
        <main class="main-content">
            <div class="container">
                <!-- Tu contenido aqu√≠ -->
            </div>
        </main>

        <!-- Footer -->
        <footer class="site-footer">
            <div class="container">
                <p>&copy; <?php echo date('Y'); ?> <?php bloginfo('name'); ?></p>
            </div>
        </footer>

        <?php wp_footer(); ?>
    </body>
    </html>
    <?php
}
```

## üéØ Mejores Pr√°cticas

### Organizaci√≥n del C√≥digo

1. **Un archivo por p√°gina**: Cada p√°gina debe tener su propio archivo handler
2. **Funciones helpers**: Crea funciones auxiliares para l√≥gica reutilizable
3. **Separaci√≥n de responsabilidades**: Mant√©n la l√≥gica de negocio separada de la presentaci√≥n

### Ejemplo de Estructura Recomendada

```
templates/Pages/
‚îú‚îÄ‚îÄ Home.php              # P√°gina principal
‚îú‚îÄ‚îÄ Contacto.php          # P√°gina de contacto
‚îú‚îÄ‚îÄ SobreNosotros.php     # P√°gina informativa
‚îú‚îÄ‚îÄ Blog.php             # Listado de posts
‚îú‚îÄ‚îÄ Producto.php         # P√°gina din√°mica de producto
‚îî‚îÄ‚îÄ helpers/
    ‚îú‚îÄ‚îÄ seo.php          # Funciones SEO
    ‚îú‚îÄ‚îÄ forms.php        # Helpers de formularios
    ‚îî‚îÄ‚îÄ navigation.php   # Helpers de navegaci√≥n
```

### Funciones Helper

Crea `templates/Pages/helpers/seo.php`:

```php
<?php
function generarMetaTags($titulo, $descripcion, $imagen = '') {
    $meta = [];

    // T√≠tulo
    $meta[] = '<title>' . esc_html($titulo) . ' - ' . get_bloginfo('name') . '</title>';

    // Open Graph
    $meta[] = '<meta property="og:title" content="' . esc_attr($titulo) . '">';
    $meta[] = '<meta property="og:description" content="' . esc_attr($descripcion) . '">';
    $meta[] = '<meta property="og:url" content="' . esc_url(get_permalink()) . '">';

    if ($imagen) {
        $meta[] = '<meta property="og:image" content="' . esc_url($imagen) . '">';
    }

    return implode("\n", $meta);
}
```

## üîç Depuraci√≥n y Testing

### Verificar que las p√°ginas funcionan

```php
// En functions.php para testing
function debug_paginas_glory() {
    if (current_user_can('administrator') && isset($_GET['debug_glory'])) {
        $paginas = PageManager::getAllPages();
        echo '<pre>';
        print_r($paginas);
        echo '</pre>';
        die();
    }
}
add_action('init', 'debug_paginas_glory');
// Visita: tusitio.com?debug_glory=1
```

### Manejo de Errores

```php
<?php
function renderErrorPage($codigo = 404) {
    http_response_code($codigo);
    ?>
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <title>Error <?php echo $codigo; ?> - <?php bloginfo('name'); ?></title>
        <?php wp_head(); ?>
    </head>
    <body class="error-page">
        <div class="error-container">
            <h1>Error <?php echo $codigo; ?></h1>
            <p><?php
            switch($codigo) {
                case 404:
                    echo 'La p√°gina que buscas no existe.';
                    break;
                case 403:
                    echo 'No tienes permisos para acceder a esta p√°gina.';
                    break;
                default:
                    echo 'Ha ocurrido un error inesperado.';
            }
            ?></p>
            <a href="<?php echo home_url(); ?>" class="btn-home">Volver al inicio</a>
        </div>
        <?php wp_footer(); ?>
    </body>
    </html>
    <?php
}
```

¬°Ahora tienes las herramientas para crear p√°ginas complejas y funcionales con Glory Framework! El sistema es flexible y escalable, permitiendo desde p√°ginas simples hasta aplicaciones web completas.
