---
title: Sistema de Alertas
description: Sistema de notificaciones personalizadas que reemplaza las funciones alert() y confirm() nativas del navegador
---

import { Card, CardGrid, LinkCard } from '@astrojs/starlight/components';

# Sistema de Alertas

El **Sistema de Alertas** de Glory proporciona notificaciones personalizadas que reemplazan las funciones nativas `alert()` y `confirm()` del navegador, ofreciendo una experiencia de usuario m√°s moderna y atractiva.

## üöÄ Caracter√≠sticas

- **Reemplazo nativo**: Sobrescribe autom√°ticamente `window.alert()` y `window.confirm()`
- **UI moderna**: Notificaciones con animaciones y dise√±o responsivo
- **Confirmaciones interactivas**: Di√°logos de confirmaci√≥n con botones personalizados
- **Integraci√≥n autom√°tica**: Se activa con el evento `gloryRecarga`
- **Fondo modal**: Soporte para fondo oscurecido en confirmaciones

## üìÅ Archivos

- **JavaScript**: `Glory/assets/js/UI/alertas.js`
- **CSS**: `Glory/assets/css/alert.css`

## üõ†Ô∏è Instalaci√≥n y Configuraci√≥n

### 1. Definir los Assets

```php
// En tu archivo de configuraci√≥n del tema (App/Config/control.php)
AssetManager::define('style', 'alert-css', 'assets/css/alert.css', [
    'area' => 'frontend',
    'ver' => '1.0.0'
]);

AssetManager::define('script', 'alert-js', 'assets/js/UI/alertas.js', [
    'deps' => ['jquery'],
    'in_footer' => true,
    'area' => 'frontend',
    'ver' => '1.0.0'
]);
```

### 2. Inicializaci√≥n Autom√°tica

El sistema se inicializa autom√°ticamente cuando se dispara el evento `gloryRecarga`:

```javascript
document.addEventListener('gloryRecarga', inicializarAlerta);
```

## üìñ Uso

### Alertas Simples

```javascript
// Se reemplaza autom√°ticamente por notificaci√≥n personalizada
alert("¬°Operaci√≥n completada con √©xito!");
```

### Confirmaciones

```javascript
// Retorna una Promise que resuelve a true/false
const resultado = await confirm("¬øEst√°s seguro de eliminar este elemento?");

if (resultado) {
    // Usuario confirm√≥
    eliminarElemento();
} else {
    // Usuario cancel√≥
    console.log("Operaci√≥n cancelada");
}
```

### Confirmaciones S√≠ncronas (Legacy)

```javascript
if (confirm("¬øDeseas continuar?")) {
    // L√≥gica para cuando el usuario confirma
    procesarAccion();
}
```

## üé® Estilos y Animaciones

### Contenedor Principal

```css
#glory-notification-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-width: 350px;
    width: 100%;
}
```

### Notificaci√≥n Individual

```css
.notificacionPersonalizada {
    padding: 15px;
    border-radius: 5px;
    background: var(--fondo);
    display: flex;
    gap: 10px;
    width: 100%;
    font-size: 11px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    animation: notification-slide-in 0.3s ease-out forwards;
}
```

### Animaciones

- **Entrada**: `notification-slide-in` - Desliza desde la derecha con fade-in
- **Salida**: `notification-fade-out` - Escala y desvanece al cerrar

## üîß API Interna

### `inicializarAlerta()`

Funci√≥n principal que configura el sistema de alertas.

**Par√°metros**: Ninguno

**Retorno**: `undefined`

### `showCustomNotification(message, type)`

Funci√≥n interna que muestra la notificaci√≥n personalizada.

**Par√°metros**:
- `message` (string): El mensaje a mostrar
- `type` (string): `'alert'` o `'confirm'`

**Retorno**: `Promise<boolean>` - Para confirmaciones, resuelve al resultado de la selecci√≥n del usuario

## üéØ Casos de Uso

### 1. Reemplazo Transparente

```javascript
// C√≥digo existente que usa alert() nativo
function guardarDatos() {
    if (validarFormulario()) {
        guardarEnBaseDatos();
        alert("Datos guardados correctamente"); // Se muestra como notificaci√≥n moderna
    }
}
```

### 2. Confirmaciones en Lote

```javascript
async function eliminarSeleccionados() {
    const elementos = obtenerElementosSeleccionados();

    for (const elemento of elementos) {
        const confirmar = await confirm(`¬øEliminar "${elemento.nombre}"?`);
        if (!confirmar) continue;

        await eliminarElemento(elemento.id);
    }
}
```

### 3. Integraci√≥n con AJAX

```javascript
function enviarFormularioAjax(formData) {
    fetch('/api/enviar', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert("Formulario enviado correctamente");
        } else {
            alert("Error al enviar el formulario: " + data.message);
        }
    });
}
```

## ‚ö†Ô∏è Consideraciones

- **Sobrescritura global**: Las funciones `alert()` y `confirm()` se sobrescriben globalmente
- **Promesas**: Las confirmaciones modernas retornan promesas, pero mantienen compatibilidad con uso s√≠ncrono
- **Z-index**: Las notificaciones tienen `z-index: 9999` para aparecer sobre otros elementos
- **Responsive**: Dise√±o adaptativo que funciona en m√≥viles y desktop
- **Accesibilidad**: Incluye soporte b√°sico para navegaci√≥n por teclado

## üîÑ Integraci√≥n con Glory

### Evento `gloryRecarga`

El sistema se reinicializa autom√°ticamente cuando ocurre una recarga de contenido:

```javascript
document.addEventListener('gloryRecarga', () => {
    // El sistema de alertas se reinicializa autom√°ticamente
    inicializarAlerta();
});
```

### Compatibilidad con Modales

Se integra autom√°ticamente con el sistema de modales de Glory cuando existe un elemento `#modalBackground`.

## üêõ Soluci√≥n de Problemas

### Las alertas no aparecen

1. Verificar que `alertas.js` est√© cargado
2. Confirmar que `alert.css` est√© incluido
3. Revisar que no haya errores de JavaScript en consola

### Las confirmaciones no funcionan

1. Verificar que se est√© usando `await` con confirmaciones modernas
2. Para compatibilidad legacy, usar sin `await`
3. Revisar que el Promise se est√© resolviendo correctamente

### Problemas de estilo

1. Verificar que las variables CSS `--fondo` est√©n definidas
2. Revisar que no haya conflictos de z-index
3. Confirmar que el contenedor `#glory-notification-container` existe en el DOM
