---
title: Integraci√≥n con Elementor
description: Gu√≠a completa para usar Glory con el page builder Elementor
sidebar:
  label: Elementor Integration
---

import { Steps } from '@astrojs/starlight/components';

# Integraci√≥n con Elementor

La integraci√≥n con Elementor permite usar componentes Glory directamente en el editor visual de Elementor, proporcionando una experiencia fluida de construcci√≥n de p√°ginas.

## Caracter√≠sticas principales

- **Widget nativo**: Elemento "Glory Content Render" en el panel de Elementor
- **Categor√≠a dedicada**: Secci√≥n "Glory" con icono distintivo
- **Configuraci√≥n visual**: Todos los par√°metros configurables desde la interfaz
- **Templates integrados**: Soporte completo para TemplateRegistry
- **ContentRender avanzado**: Motor completo de renderizado de contenido

## Activaci√≥n autom√°tica

La integraci√≥n con Elementor se activa autom√°ticamente cuando Elementor est√° presente:

```php
<?php
// En functions.php - No se requiere configuraci√≥n adicional

use Glory\Integration\IntegrationsManager;

$integrations = new IntegrationsManager();
$integrations->register(); // Detecta y registra Elementor autom√°ticamente
?>
```

### Verificaci√≥n de activaci√≥n

```php
// Verificar si Elementor est√° activo
if (class_exists('\Elementor\Plugin')) {
    // Elementor est√° disponible
}
```

## Widget Glory Content Render

### Ubicaci√≥n en Elementor

El widget aparece en la secci√≥n **"Glory"** del panel de elementos:

```
üìö Glory
  ‚îî‚îÄ üß© Glory Content Render
```

### Configuraci√≥n b√°sica

<Steps>

1. **Agregar el widget** a tu layout de p√°gina
2. **Seleccionar tipo de contenido** (post, page, custom post types)
3. **Elegir plantilla** del TemplateRegistry
4. **Configurar opciones** de visualizaci√≥n

</Steps>

### Par√°metros principales

#### Tipo de contenido
- **Post**: Art√≠culos est√°ndar de WordPress
- **Page**: P√°ginas
- **Custom Post Types**: Todos los tipos personalizados registrados

#### Plantillas disponibles
- **Plantilla por defecto**: Renderizado gen√©rico b√°sico
- **Templates registrados**: Todas las plantillas del `TemplateRegistry`
- **Compatibilidad autom√°tica**: Verifica si la plantilla aplica al post type seleccionado

## Configuraci√≥n avanzada de ContentRender

### Paginaci√≥n y rendimiento

```json
{
  "publicacionesPorPagina": 12,
  "paginacion": true,
  "tiempoCache": 3600,
  "forzarSinCache": false
}
```

### Ordenamiento personalizado

**Por fecha:**
```json
{"orden": "fecha"}
```

**Aleatorio:**
```json
{"orden": "random"}
```

**Por campo personalizado:**
```json
{
  "orden": "meta",
  "metaKey": "precio",
  "metaOrder": "DESC"
}
```

### Acciones interactivas

```json
{
  "acciones": ["editar", "eliminar", "favorito"],
  "submenu": true,
  "eventoAccion": "dblclick",
  "selectorItem": "[id^=\"post-\"]"
}
```

## Ejemplos de uso

### Blog con paginaci√≥n AJAX

<Steps>

1. **Crear nueva p√°gina** en WordPress
2. **Editar con Elementor**
3. **Agregar widget** "Glory Content Render"
4. **Configurar**:
   - Tipo: `post`
   - Plantilla: `tarjeta_blog`
   - Publicaciones por p√°gina: `9`
   - Paginaci√≥n AJAX: ‚úÖ S√≠
   - Clase contenedor: `blog-grid`

</Steps>

### Portfolio personalizado

```json
// Configuraci√≥n del widget
{
  "post_type": "portfolio",
  "template_id": "portfolio_card",
  "publicaciones_por_pagina": 6,
  "clase_contenedor": "portfolio-masonry",
  "orden": "random",
  "acciones": ["ver_detalle", "filtrar"],
  "submenu": true
}
```

### Cat√°logo de productos

```json
{
  "post_type": "producto",
  "template_id": "tarjeta_producto",
  "publicaciones_por_pagina": 12,
  "orden": "meta",
  "meta_key": "precio",
  "meta_order": "ASC",
  "paginacion": true,
  "acciones": ["agregar_carrito", "ver_detalle"]
}
```

## Consultas avanzadas

### Usar argumentos JSON personalizados

```json
// En el campo "Argumentos de consulta avanzados (JSON)"
{
  "post__in": [1, 2, 3, 4, 5],
  "tax_query": [
    {
      "taxonomy": "categoria",
      "field": "slug",
      "terms": ["destacado", "premium"]
    }
  ],
  "meta_query": [
    {
      "key": "precio",
      "value": 100,
      "compare": "<=",
      "type": "NUMERIC"
    }
  ]
}
```

### Filtros por taxonom√≠a

```json
{
  "tax_query": [
    {
      "taxonomy": "categoria_producto",
      "field": "term_id",
      "terms": [10, 20, 30]
    }
  ]
}
```

### Posts con meta espec√≠fica

```json
{
  "meta_query": [
    {
      "key": "destacado",
      "value": "1",
      "compare": "="
    }
  ]
}
```

## Modo alternativo (sin ContentRender)

Si desactivas "Usar motor ContentRender", el widget ofrece modos alternativos:

### Funci√≥n PHP personalizada

```php
function mi_contenido_personalizado() {
    // Tu c√≥digo personalizado aqu√≠
    echo '<div class="mi-contenido">';
    echo '<h2>Contenido personalizado</h2>';
    echo '<p>Este contenido viene de una funci√≥n PHP.</p>';
    echo '</div>';
}
// add_action('init', 'mi_contenido_personalizado'); // Registrar si es necesario
```

**Configuraci√≥n en Elementor:**
- Funci√≥n PHP: `mi_contenido_personalizado`

### Shortcode personalizado

```php
function mi_shortcode_personalizado($atts) {
    return '<div class="mi-shortcode">Contenido desde shortcode</div>';
}
add_shortcode('mi_shortcode', 'mi_shortcode_personalizado');
```

**Configuraci√≥n en Elementor:**
- Shortcode: `[mi_shortcode]`

### Contenido HTML directo

Usa el editor WYSIWYG para contenido HTML directo sin procesar.

## Templates personalizados

### Crear template para Elementor

```php
<?php
// functions.php

use Glory\Utility\TemplateRegistry;

function registrar_templates_elementor() {
    // Template para cards en Elementor
    TemplateRegistry::register(
        'elementor_card',
        'Card para Elementor',
        function($post, $itemClass) {
            echo '<article class="' . esc_attr($itemClass) . ' elementor-card">';
            echo '<div class="card-image">';
            echo get_the_post_thumbnail($post, 'medium');
            echo '</div>';
            echo '<div class="card-content">';
            echo '<h3><a href="' . get_permalink($post) . '">' . get_the_title($post) . '</a></h3>';
            echo '<p class="card-excerpt">' . get_the_excerpt($post) . '</p>';
            echo '<span class="card-date">' . get_the_date() . '</span>';
            echo '</div>';
            echo '</article>';
        },
        ['post', 'page'], // Aplica a posts y p√°ginas
        ['thumbnail', 'excerpt', 'title']
    );
}
add_action('init', 'registrar_templates_elementor');
?>
```

### Template condicional

```php
TemplateRegistry::register(
    'card_adaptable',
    'Card Adaptable',
    function($post, $itemClass) {
        $clase_base = 'elementor-card';

        // Agregar clases condicionales
        if (has_post_thumbnail($post)) {
            $clase_base .= ' has-thumbnail';
        }
        if (has_excerpt($post)) {
            $clase_base .= ' has-excerpt';
        }

        echo '<div class="' . esc_attr($clase_base . ' ' . $itemClass) . '">';

        if (has_post_thumbnail($post)) {
            echo '<img src="' . get_the_post_thumbnail_url($post, 'medium') . '" alt="' . get_the_title($post) . '">';
        }

        echo '<h4>' . get_the_title($post) . '</h4>';

        if (has_excerpt($post)) {
            echo '<p>' . get_the_excerpt($post) . '</p>';
        }

        echo '</div>';
    },
    [], // Aplica a todos los post types
    ['thumbnail', 'excerpt']
);
```

## Estilos y personalizaci√≥n

### CSS para Elementor

```css
/* A√±adir a tu theme stylesheet */

.elementor-card {
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    overflow: hidden;
    transition: box-shadow 0.3s ease;
}

.elementor-card:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.elementor-card .card-image img {
    width: 100%;
    height: 200px;
    object-fit: cover;
}

.elementor-card .card-content {
    padding: 20px;
}

.elementor-card .card-title {
    margin: 0 0 10px 0;
    font-size: 18px;
}

.elementor-card .card-excerpt {
    color: #666;
    margin: 0 0 15px 0;
    line-height: 1.5;
}

.elementor-card .card-date {
    font-size: 12px;
    color: #999;
}
```

### Variables CSS para temas

```css
:root {
    --glory-card-border-radius: 8px;
    --glory-card-shadow: 0 4px 12px rgba(0,0,0,0.1);
    --glory-card-padding: 20px;
    --glory-transition-duration: 0.3s;
}
```

## Optimizaci√≥n de rendimiento

### Cach√© inteligente

```json
// Configuraci√≥n recomendada para producci√≥n
{
  "tiempoCache": 3600,
  "forzarSinCache": false,
  "minPaginas": 1
}
```

### Paginaci√≥n eficiente

```json
// Para listados largos
{
  "publicaciones_por_pagina": 12,
  "paginacion": true,
  "tiempo_cache": 1800
}
```

### Selectores optimizados

```json
// Para mejor rendimiento de acciones
{
  "selector_item": ".elementor-card",
  "evento_accion": "click"
}
```

## Soluci√≥n de problemas

### Widget no aparece

1. **Verificar activaci√≥n**: Asegurar que Elementor est√© activo
2. **Limpiar cach√©**: Limpiar cach√© de Elementor y WordPress
3. **Verificar dependencias**: Asegurar que `ContentRenderWidget` existe

### Template no carga

1. **Verificar registro**: Asegurar que la template est√© registrada en `TemplateRegistry`
2. **Compatibilidad**: Verificar que la template aplique al post type seleccionado
3. **Sintaxis**: Revisar que la funci√≥n callback sea v√°lida

### Paginaci√≥n no funciona

1. **AJAX habilitado**: Verificar que "Paginaci√≥n AJAX" est√© activado
2. **Scripts cargados**: Asegurar que `gloryAjax.js` est√© en cola
3. **Configuraci√≥n**: Verificar configuraci√≥n de endpoints AJAX

## Mejores pr√°cticas

### 1. Nombres descriptivos

```php
// ‚úÖ Bueno
TemplateRegistry::register('portfolio_card_wide', 'Portfolio Card Ancho', ...);

// ‚ùå Evitar
TemplateRegistry::register('temp1', 'Template 1', ...);
```

### 2. Validaci√≥n de templates

```php
function($post, $itemClass) {
    // Validar entrada
    if (!($post instanceof WP_Post)) {
        return;
    }

    // Escapar output
    $itemClass = esc_attr($itemClass);
}
```

### 3. Configuraciones por uso

```json
// Para blogs
{
  "template_id": "blog_card",
  "publicaciones_por_pagina": 10,
  "orden": "fecha"
}

// Para portfolios
{
  "template_id": "portfolio_grid",
  "publicaciones_por_pagina": 9,
  "orden": "random"
}
```

### 4. Responsive design

```css
.elementor-card {
    /* Mobile first */
}

@media (min-width: 768px) {
    .elementor-card {
        /* Tablet styles */
    }
}

@media (min-width: 1024px) {
    .elementor-card {
        /* Desktop styles */
    }
}
```

## Casos de uso avanzados

### Constructor de p√°ginas din√°micas

```php
// P√°gina de archivo din√°mica
function pagina_archivo_elementor() {
    if (!function_exists('elementor_theme_do_location')) {
        return;
    }

    // Header
    elementor_theme_do_location('header');

    // Contenido din√°mico con Glory
    echo '<div class="archive-content">';
    echo do_shortcode('[elementor-template id="archive-template"]');
    echo '</div>';

    // Footer
    elementor_theme_do_location('footer');
}
```

### Integraci√≥n con ACF

```php
// Template que usa campos ACF
TemplateRegistry::register(
    'acf_card',
    'Card con ACF',
    function($post, $itemClass) {
        echo '<div class="' . esc_attr($itemClass) . '">';

        // Campo personalizado ACF
        $subtitulo = get_field('subtitulo', $post->ID);
        if ($subtitulo) {
            echo '<h4>' . esc_html($subtitulo) . '</h4>';
        }

        echo '<h2>' . get_the_title($post) . '</h2>';

        // Galer√≠a ACF
        $galeria = get_field('galeria', $post->ID);
        if ($galeria) {
            echo '<div class="galeria-acf">';
            foreach ($galeria as $imagen) {
                echo '<img src="' . esc_url($imagen['url']) . '" alt="' . esc_attr($imagen['alt']) . '">';
            }
            echo '</div>';
        }

        echo '</div>';
    },
    ['post'],
    ['acf_fields']
);
```

### Sistema de filtros AJAX

```php
// Filtros que actualizan el ContentRender
function filtros_ajax_elementor() {
    ?>
    <div class="elementor-filtros">
        <select class="filtro-categoria" data-filter="categoria">
            <option value="">Todas las categor√≠as</option>
            <?php
            $categorias = get_categories();
            foreach ($categorias as $cat) {
                echo '<option value="' . $cat->term_id . '">' . $cat->name . '</option>';
            }
            ?>
        </select>
    </div>

    <script>
    jQuery(document).ready(function($) {
        $('.filtro-categoria').on('change', function() {
            var categoriaId = $(this).val();
            var contentRenderContainer = $('.glory-content-list');

            // Actualizar par√°metros del ContentRender
            // (Requiere configuraci√≥n adicional del endpoint AJAX)
        });
    });
    </script>
    <?php
}
```

## Consideraciones finales

- La integraci√≥n es completamente agn√≥stica y no modifica Elementor
- Los widgets siguen las convenciones est√°ndar de Elementor
- Compatible con Elementor Pro y versiones gratuitas
- Optimizado para rendimiento y experiencia de usuario
- Totalmente extensible mediante hooks y filtros de WordPress
