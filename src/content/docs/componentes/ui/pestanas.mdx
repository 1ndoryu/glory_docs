---
title: Sistema de Pesta√±as
description: Componente de navegaci√≥n por pesta√±as con persistencia de estado y accesibilidad ARIA
---

import { Card, CardGrid } from '@astrojs/starlight/components';

# Sistema de Pesta√±as (`pestanas.js`)

Sistema de navegaci√≥n por pesta√±as que proporciona una interfaz de usuario intuitiva con persistencia autom√°tica del estado activo entre sesiones y recargas de p√°gina.

## üöÄ Inicio R√°pido

```html
<!-- Estructura HTML b√°sica -->
<div class="gloryTabs" id="mi-tabs">
    <!-- Contenedor de pesta√±as (se genera autom√°ticamente) -->
    <div class="pestanas"></div>

    <!-- Contenido de las pesta√±as -->
    <div class="pestanaContenido" data-pestana="General">Contenido de General</div>
    <div class="pestanaContenido" data-pestana="Avanzado">Contenido de Avanzado</div>
    <div class="pestanaContenido" data-pestana="Ayuda">Contenido de Ayuda</div>
</div>
```

```javascript
// El sistema se inicializa autom√°ticamente en gloryRecarga
// No requiere configuraci√≥n manual adicional
```

## üìã Funcionalidades

### Caracter√≠sticas Principales
- **Persistencia Autom√°tica**: Recuerda la pesta√±a activa entre sesiones usando localStorage
- **Accesibilidad ARIA**: Soporte completo para lectores de pantalla
- **Generaci√≥n Din√°mica**: Crea los botones de pesta√±as autom√°ticamente
- **M√∫ltiples Instancias**: Soporta varios grupos de pesta√±as en la misma p√°gina
- **Fallback Inteligente**: Sistema de prioridades para determinar pesta√±a inicial

### Sistema de Prioridades para Pesta√±a Inicial

1. **localStorage**: Estado guardado en sesiones anteriores
2. **data-active-index**: Atributo en el contenedor
3. **Clase .activa**: Pesta√±a con clase activa en HTML
4. **Primera pesta√±a**: Fallback por defecto

## üé® Estructura HTML

### Contenedor Principal
```html
<div class="gloryTabs" id="configuracion-tabs">
    <!-- Los botones se generan aqu√≠ autom√°ticamente -->
    <div class="pestanas"></div>

    <!-- Paneles de contenido -->
    <div class="pestanaContenido" data-pestana="General">
        <h3>Configuraci√≥n General</h3>
        <p>Contenido de la pesta√±a general...</p>
    </div>

    <div class="pestanaContenido" data-pestana="Avanzado">
        <h3>Configuraci√≥n Avanzada</h3>
        <p>Contenido avanzado...</p>
    </div>
</div>
```

### Atributos de Configuraci√≥n

#### data-tabs-id
Identificador √∫nico para persistencia de estado. Si no se especifica, usa el ID del elemento o un √≠ndice autom√°tico.

```html
<div class="gloryTabs" data-tabs-id="configuracion-principal">
    <!-- Contenido -->
</div>
```

#### data-active-index
Fuerza una pesta√±a inicial espec√≠fica (0-indexed).

```html
<div class="gloryTabs" data-active-index="2">
    <!-- La tercera pesta√±a ser√° activa inicialmente -->
</div>
```

#### data-pestana
Nombre personalizado para cada pesta√±a. Si no se especifica, usa "Pesta√±a N".

```html
<div class="pestanaContenido" data-pestana="Configuraci√≥n de Usuario">
    <!-- Nombre personalizado -->
</div>
```

## üîß Configuraci√≥n Avanzada

### Claves de localStorage
El sistema genera claves √∫nicas para cada grupo de pesta√±as:

```
gloryTabs:/ruta/pagina:id-del-contenedor
gloryTabs:/ruta/pagina:idx-0  // Para contenedores sin ID
```

### Persistencia del Estado
- **Guardado**: Autom√°tico al cambiar de pesta√±a
- **Restauraci√≥n**: Al inicializar el componente
- **Alcance**: Por p√°gina y contenedor espec√≠fico

## üìù API T√©cnica

### Funci√≥n Principal

#### `pestanas()`
Inicializa todos los sistemas de pesta√±as en la p√°gina.

```javascript
// Se ejecuta autom√°ticamente en gloryRecarga
// Puede llamarse manualmente para reinicializar
pestanas();
```

### Eventos

#### `gloryRecarga`
Reinicializa todas las pesta√±as cuando ocurre este evento.

```javascript
document.addEventListener('gloryRecarga', pestanas);
```

## üé® Estados y Clases CSS

### Clases Autom√°ticas
- `.activa`: Pesta√±a o panel actualmente activo
- `.pestanas`: Contenedor generado para los botones
- `.pestanaContenido`: Paneles de contenido (requerido)

### Estructura Generada
```html
<div class="gloryTabs">
    <!-- Botones generados autom√°ticamente -->
    <div class="pestanas">
        <button role="tab" aria-controls="pestanaID-0-0" aria-selected="true" class="activa">
            General
        </button>
        <button role="tab" aria-controls="pestanaID-0-1" aria-selected="false">
            Avanzado
        </button>
    </div>

    <!-- Contenido original con IDs asignados -->
    <div id="pestanaID-0-0" class="pestanaContenido activa">...</div>
    <div id="pestanaID-0-1" class="pestanaContenido">...</div>
</div>
```

## üîß Atributos ARIA

### Soporte de Accesibilidad
- `role="tab"`: Rol ARIA para botones de pesta√±a
- `role="tabpanel"`: Rol impl√≠cito para paneles de contenido
- `aria-controls`: Vincula bot√≥n con su panel correspondiente
- `aria-selected`: Indica estado de selecci√≥n (true/false)

### Navegaci√≥n por Teclado
- **Tab**: Navega entre pesta√±as
- **Enter/Space**: Activa la pesta√±a enfocada
- **Flechas**: Navegaci√≥n entre pesta√±as (puede implementarse adicionalmente)

## üéØ Casos de Uso

### Configuraci√≥n por Secciones
```html
<div class="gloryTabs" data-tabs-id="config-plugin">
    <div class="pestanas"></div>

    <div class="pestanaContenido" data-pestana="General">
        <h4>Configuraci√≥n General</h4>
        <form>...</form>
    </div>

    <div class="pestanaContenido" data-pestana="API">
        <h4>Configuraci√≥n de API</h4>
        <form>...</form>
    </div>

    <div class="pestanaContenido" data-pestana="Avanzado">
        <h4>Opciones Avanzadas</h4>
        <form>...</form>
    </div>
</div>
```

### Paneles de Administraci√≥n
```html
<div class="gloryTabs" id="admin-paneles">
    <div class="pestanas"></div>

    <div class="pestanaContenido" data-pestana="Usuarios">
        <!-- Gesti√≥n de usuarios -->
    </div>

    <div class="pestanaContenido" data-pestana="Contenido">
        <!-- Gesti√≥n de contenido -->
    </div>

    <div class="pestanaContenido" data-pestana="Sistema">
        <!-- Configuraci√≥n del sistema -->
    </div>
</div>
```

### Formularios Multi-paso
```html
<div class="gloryTabs" data-tabs-id="formulario-wizard">
    <div class="pestanas"></div>

    <div class="pestanaContenido" data-pestana="Paso 1">
        <h3>Informaci√≥n Personal</h3>
        <!-- Campos del paso 1 -->
    </div>

    <div class="pestanaContenido" data-pestana="Paso 2">
        <h3>Preferencias</h3>
        <!-- Campos del paso 2 -->
    </div>

    <div class="pestanaContenido" data-pestana="Revisar">
        <h3>Revisar y Enviar</h3>
        <!-- Resumen final -->
    </div>
</div>
```

## üîÑ Gesti√≥n del Estado

### Persistencia Autom√°tica
```javascript
// El estado se guarda autom√°ticamente
// Para acceder manualmente:
const estadoGuardado = localStorage.getItem('gloryTabs:/current/path:mi-tabs');
```

### Program√°tico
```javascript
// Cambiar pesta√±a program√°ticamente
const contenedor = document.querySelector('.gloryTabs');
const botones = contenedor.querySelectorAll('.pestanas button');
botones[1].click(); // Activa la segunda pesta√±a
```

### Reset del Estado
```javascript
// Limpiar estado guardado
localStorage.removeItem('gloryTabs:/current/path:mi-tabs');
location.reload(); // Recargar para aplicar cambios
```

## üé® Personalizaci√≥n CSS

### Estilos B√°sicos
```css
.gloryTabs {
    /* Estilos del contenedor principal */
}

.pestanas {
    display: flex;
    border-bottom: 1px solid #ddd;
}

.pestanas button {
    padding: 10px 20px;
    border: none;
    background: none;
    cursor: pointer;
    border-bottom: 2px solid transparent;
}

.pestanas button.activa {
    border-bottom-color: #007cba;
    font-weight: bold;
}

.pestanaContenido {
    display: none;
    padding: 20px;
}

.pestanaContenido.activa {
    display: block;
}
```

### Tema Oscuro
```css
/* Tema oscuro */
.gloryTabs.dark .pestanas {
    border-bottom-color: #333;
}

.gloryTabs.dark .pestanas button.activa {
    border-bottom-color: #61dafb;
}
```

## üîß Integraci√≥n con Frameworks

### WordPress Admin
Compatible con el sistema de administraci√≥n de WordPress, manteniendo la persistencia entre cambios de p√°gina.

### React/Vue Integration
Puede usarse como base para componentes m√°s complejos en frameworks modernos.

## üêõ Soluci√≥n de Problemas

### Problemas Comunes

1. **Pesta√±as no cambian**: Verificar estructura HTML correcta
2. **Estado no persiste**: Revisar localStorage disponible y permisos
3. **IDs duplicados**: Asegurar IDs √∫nicos en la p√°gina
4. **ARIA no funciona**: Verificar que el HTML se genera correctamente

### Debug
```javascript
// Verificar inicializaci√≥n
document.addEventListener('gloryRecarga', () => {
    console.log('Pesta√±as inicializadas');
    console.log('Contenedores encontrados:', document.querySelectorAll('.gloryTabs').length);
});
```

## üìä Rendimiento

- **Inicializaci√≥n Eficiente**: Solo procesa elementos con clase `.gloryTabs`
- **Event Delegation**: Un solo event listener por contenedor
- **Lazy Evaluation**: Solo calcula dimensiones cuando es necesario
- **Memory Safe**: No mantiene referencias globales persistentes

## üîÑ Compatibilidad

- ‚úÖ **Modern Browsers**: ES6+, localStorage, querySelector
- ‚úÖ **Legacy Support**: Funciona en navegadores antiguos con polyfills
- ‚úÖ **WordPress**: Integraci√≥n completa con admin y frontend
- ‚úÖ **Mobile**: Responsive y touch-friendly
- ‚úÖ **Accessibility**: Soporte ARIA completo
